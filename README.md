# fire\_uav üì°üî•

**Fire Smoke Human Detection & UAV Mission Planning**

`fire_uav` ‚Äî –º–æ–¥—É–ª—å–Ω–æ–µ Python-—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–æ–∂–∞—Ä–∞, –¥—ã–º–∞ –∏ –ª—é–¥–µ–π –Ω–∞ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–µ –¥—Ä–æ–Ω–æ–≤, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ REST‚ÄëAPI –∏ Prometheus.

---

## üîé –û—Å–Ω–æ–≤–Ω–æ–µ

* **–î–µ—Ç–µ–∫—Ü–∏—è**: YOLOv11 (Ultralytics) –Ω–∞ PyTorch –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –æ–≥–Ω—è, –¥—ã–º–∞ –∏ —á–µ–ª–æ–≤–µ–∫–∞.
* **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: OR-Tools + Shapely –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –º–∏—Å—Å–∏–∏.
* **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –µ–¥–∏–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –æ—á–µ—Ä–µ–¥–µ–π –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
* **REST API & GUI**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–æ–º/–æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π, –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
* **–ú–µ—Ç—Ä–∏–∫–∏**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Prometheus (`/metrics`) –¥–ª—è FPS, –∑–∞–¥–µ—Ä–∂–µ–∫ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π.
* **–¢–µ—Å—Ç—ã & CI**: `pytest` + –ø–æ–∫—Ä—ã—Ç–∏–µ ‚â•‚ÄØ80%, Pre‚Äëcommit (Black, isort, Flake8, Mypy).

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/        # CI/CD: lint, —Ç–µ—Å—Ç—ã, coverage, Docker
‚îú‚îÄ‚îÄ data/                 # –î–∞–Ω–Ω—ã–µ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ artifacts/        # –∂—É—Ä–Ω–∞–ª—ã, –ø–ª–∞–Ω—ã –º–∏—Å—Å–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/           # –≤–µ—Å–∞ –¥–µ—Ç–µ–∫—Ç–æ—Ä–æ–≤ (.pt)
‚îÇ   ‚îî‚îÄ‚îÄ outputs/          # —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ fire_uav/             # –∏—Å—Ö–æ–¥–Ω—ã–π –ø–∞–∫–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ api/              # FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config/           # YAML‚Äë–∫–æ–Ω—Ñ–∏–≥–∏ (–ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, defaults)
‚îÇ   ‚îú‚îÄ‚îÄ core/             # –¥–µ—Ç–µ–∫—Ü–∏—è, —Ç—Ä–µ–∫–∏–Ω–≥, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ gui/              # MVVM + PyQt6 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ services/         # EventBus, LifecycleManager –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ tests/            # unit-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ paths.py          # –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—É—Ç–µ–π –∫ data/
‚îÇ   ‚îî‚îÄ‚îÄ bootstrap.py      # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞: CLI, API, GUI
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ pytest.ini            # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ pytest
‚îî‚îÄ‚îÄ README.md             # —ç—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/username/fire_uav.git
cd fire_uav
pip install -r requirements.txt
```

> ‚ùó –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
> `python -m venv .venv && source .venv/bin/activate`

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ –≤–µ—Å–∞ –º–æ–¥–µ–ª–µ–π –≤ `data/models/`.
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–æ—Ä–Ω–µ –µ—Å—Ç—å –ø–∞–ø–∫–∞ `data/artifacts/` –∏ `data/outputs/`.

```bash
mkdir -p data/models data/artifacts data/outputs
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥: `fire_uav/config/defaults.yaml`
* –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: `fire_uav/config/logging.yaml`

–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø—É—Ç–∏, thresholds) –º–æ–∂–Ω–æ –ø—Ä–∞–≤–∏—Ç—å –≤ —ç—Ç–∏—Ö —Ñ–∞–π–ª–∞—Ö.

### 4. –ó–∞–ø—É—Å–∫

#### CLI (Headless)

```bash
python -m fire_uav.bootstrap detect \
  --input video.mp4 \
  --model data/models/fire_detector.pt \
  --output data/outputs/results.mp4
```

#### GUI

```bash
poetry run python -m fire_uav.main
```

#### REST API + Prometheus

```bash
uvicorn fire_uav.api.main_rest:app --host 0.0.0.0 --port 8000
```

* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `POST /start`, `POST /stop`, `GET /status`, `GET /plan`.
* –ú–µ—Ç—Ä–∏–∫–∏: `GET /metrics` (Prometheus scraping).

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
pytest --cov=fire_uav --cov-report=term-missing
```

* –¶–µ–ª—å: –ø–æ–∫—Ä—ã—Ç–∏–µ –Ω–µ –Ω–∏–∂–µ 80%.
* –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest ‚Äî –≤ `pytest.ini`.

---

## üõ†Ô∏è CI/CD

–§–∞–π–ª: `.github/workflows/ci.yml`

1. Pre‚Äëcommit (Black, isort, Flake8, Mypy).
2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º.
3. –ü—É–±–ª–∏–∫–∞—Ü–∏—è HTML‚Äë–æ—Ç—á—ë—Ç–∞ –ø–æ–∫—Ä—ã—Ç–∏—è.
4. –°–±–æ—Ä–∫–∞ Docker‚Äë–æ–±—Ä–∞–∑–∞.

---

